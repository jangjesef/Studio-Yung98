<astro-fragment>
  <template lang="html">
    <section class="photos" data-astro-cid-j7pv25f6>
      <h2>Moje fotky</h2>
      <div class="photos-container">
        <!-- Dynamické načítání fotek -->
        {% for image_path in props.imagePaths %}
          <img src={image_path} alt="Fotka" data-astro-cid-j7pv25f6 />
        {% endfor %}
      </div>
    </section>
  </template>

  <script context="module">
    import fs from 'fs/promises';
    import path from 'path';

    export async function load() {
      const imgFolderPath = path.join(process.cwd(), 'yung', 'public', 'img');
      
      try {
        const imageFiles = await fs.readdir(imgFolderPath);
        const imagePaths = imageFiles
          .filter(file => /\.(jpg|jpeg|png)$/i.test(file))
          .map(file => `/img/${file}`);
        
        return { imagePaths };
      } catch (err) {
        console.error('Failed to load images:', err);
        return { imagePaths: [] };
      }
    }
  </script>

  <style>
    .photos-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 20px 0;
      justify-content: center;
    }
    
    .photos-container img {
      width: 100%;
      max-width: 300px;
      height: auto;
      object-fit: cover;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
  </style>
</astro-fragment>
